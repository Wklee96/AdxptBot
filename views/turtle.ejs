<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/stylesheets/turtle.css">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

</head>

<body>
    <script>
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.com/en_US/messenger.Extensions.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'Messenger'));
        window.extAsyncInit = function () {
            MessengerExtensions.getSupportedFeatures(function success(result) {
                let features = result.supported_features;
                if (features.indexOf("context") != -1) {
                    MessengerExtensions.getContext(325532075064592,
                        function success(thread_context) {
                            // success
                            document.getElementById('insertPurchase').action = `/product/turtle/${thread_context.psid}`;
                            document.getElementById('submitButton').addEventListener('click', function () {
                                MessengerExtensions.requestCloseBrowser(function success() {
                                    console.log("Webview closing");
                                }, function error(err) {
                                    console.log(err);
                                });
                            })
                        },
                        function error(err) {
                            console.log(err);
                        }
                    );
                }
            }, function error(err) {
                console.log(err);
            });
        };
    </script>
    <form role="form" id="insertPurchase" method="POST">
        <div class="container">
            <hr>
            <div class="form-row">
                <fieldset class="form-group">
                    <div class="col">
                        <legend class="col-form-label col-sm-2 pt-0">Combo</legend>
                        <div class="col-sm-10">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="howmany" id="comboOne" value="One for RM135"
                                    checked>
                                <label class="form-check-label" for="howmany">
                                    Order one for RM135
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="howmany" id="comboTwo" value="Two for RM180">
                                <label class="form-check-label" for="howmany">
                                    Order two for RM180
                                </label>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="form-row">
                <div class="col">                
                    <label for="quantity">Quantity</label>
                    <input type="number" name="quantity" id="quantity" min="1" value="1" aria-required="">
                </div>
            </div>
        </div>
        <div class="container">
            <hr>
            <div class="form-row">
                <div class="col">
                    <label for="name">*Name</label>
                    <input type="name" class="form-control" id="name" name="name" aria-required="true" value="<%= name %>">
                </div>
                <div class="col">
                    <label for="phoneumber">*Phone Number</label>
                    <input type="tel" class="form-control" id="phoneumber" name="phonenumber" aria-required="true">
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" name="email" id="email">
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <label for="inputState">*State</label>
                    <input type="text" class="form-control" id="inputState" name="inputState" aria-required="true">
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <label for="inputCity">*City</label>
                    <input type="text" class="form-control" id="inputCity" name="inputCity" aria-required="true">
                </div>
                <div class="col">
                    <label for="inputZip">*Zip</label>
                    <input type="text" class="form-control" id="inputZip" name="inputZip" aria-required="true">
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <label for="inputAddress">*Full Address</label>
                    <input type="text" class="form-control" id="inputAddress" name="inputAddress" aria-required="true">
                </div>
            </div>
        </div>
        <div class="container">
            <hr>
            <div class="form-row">
                <fieldset class="form-group">
                    <div class="col">
                        <legend class="col-form-label col-sm-2 pt-0">Preferred day</legend>
                        <div class="col-sm-10">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="week" id="weekday" value="weekday"
                                    checked>
                                <label class="form-check-label" for="weekday">
                                    Weekdays
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="week" id="weekend" value="weekend">
                                <label class="form-check-label" for="weekend">
                                    Weekends
                                </label>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="form-group">
                    <div class="col">
                        <legend class="col-form-label col-sm-2 pt-0">Preferred Time</legend>
                        <div class="col-sm-10">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="time" id="morning" value="morning"
                                    checked>
                                <label class="form-check-label" for="morning">
                                    Morning
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="time" id="afternoon" value="afternoon">
                                <label class="form-check-label" for="afternoon">
                                    Afternoon
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="time" id="evening" value="evening">
                                <label class="form-check-label" for="evening">
                                    Evening
                                </label>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
            <hr>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="inputNote">Note</label>
                    <textarea class="form-control" id="inputNote" rows="3" placeholder="Any delivery instructions"></textarea>
                </div>
            </div>
            <hr>
            <div class="form-actions">
                <button id="submitButton" type="submit" class="btn btn-danger" style="display: block; margin: 0 auto;">Submit</button>
            </div>
        </div>
    </form>
    </div>
</body>

</html>